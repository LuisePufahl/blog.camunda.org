<!DOCTYPE html>
<html class="no-js" lang="en-us" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <meta name="viewport" content="width=device-width" />

  

  <title>Rendering BPMN and highlight current task using bpmn.io | Camunda BPM</title>


  <link rel="canonical" href="http://camunda.github.io/blog.camunda.org/post/2015/08/rendering-bpmn-and-highlight-current/">

  

  <meta name="generator" content="Hugo 0.15-camunda" />

  <link type="text/css" rel="stylesheet" href="http://camunda.github.io/blog.camunda.org/css/styles.css" />
  <link href='http://camunda.github.io/blog.camunda.org/favicon.ico' rel='icon' type='image/x-icon'/>
</head>
<body class="">

<header>
  <div>
    <h1>
      <a class="site-link" href="http://camunda.github.io/blog.camunda.org/">
        <span class="bpmn-icon-bpmn-io"></span>
        <span class="site-title">Camunda Team Blog</span>
      </a>
    </h1>

    

    <div class="grill">
      <button class="sidebar-toggle" title="Toggle menu">
  <span></span>
  <span></span>
  <span></span>
</button>

    </div>
  </div>
</header>

<div class="page-wrapper">


  <div class="page-content post">
    <article>
      <header class="row">
  <h1><a href="/blog.camunda.org/post/2015/08/rendering-bpmn-and-highlight-current/">Rendering BPMN and highlight current task using bpmn.io</a></h1>

  <div class="meta">
    Written by <a href="#author-badge" class="author">Bernd Rücker</a>
    on <time pubdate="0001-01-01 00:00:00 &#43;0000 UTC">Wed, 6 Aug 2015</time>,
    under <a href="http://camunda.github.io/blog.camunda.org/categories/modeling">Modeling</a> category.
    
  </div>

</header>


      <div class="content">
        <div>
With bpmn.io and the Camunda REST API it is really simple to develop a small HTML page that displays a process instance grafically and highlights some activities. In our "<a href="https://github.com/camunda/camunda-consulting/blob/master/snippets/jsf-simple-tasklist/" target="_blank">JSF Simple Tasklist</a>" snippet we used this to highlight the current Task (like it is done in the Camunda BPM Tasklist):<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="https://raw.githubusercontent.com/camunda/camunda-consulting/master/snippets/jsf-simple-tasklist/diagram.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="408" src="https://raw.githubusercontent.com/camunda/camunda-consulting/master/snippets/jsf-simple-tasklist/diagram.png" width="640" /></a></div>
<br />
<br />
<a name='more'></a><br />
<br />
The cool thing - you do not need a lot of code to do this! This is what we do:<br />
<ul>
<li>Handed over the taskId via URL parameter (see Screenshot).&nbsp;</li>
<li>Load the <a href="http://docs.camunda.org/latest/api-references/rest/#task-get-single-task" target="_blank">Task details</a> and <a href="http://docs.camunda.org/latest/api-references/rest/#process-definition-get-bpmn-20-xml" target="_blank">BPMN XML</a> via REST API.</li>
<li>Instantiate the BPMN viewer and hand over the XML for rendering</li>
<li>Add a CSS class for the activity to be highlighted</li>
<li>Load JavaScript/CSS dependencies, we used <a href="http://www.webjars.org/" target="_blank">WebJars</a>, so they are added to our Maven build in a versioned way</li>
</ul>
<div>
This is the required JavaScript Code:<br />
<pre class="Prettyprint"><code language="javascript">
$(document).ready(function() {
    var restAccess = '/engine-rest';
    var BpmnViewer = window.BpmnJS;
    var viewer = new BpmnViewer({container: '#diagramCanvas', width: '100%', height: '100%'});
    var container = $('#js-drop-zone');
    // get the diagram
    $.get(restAccess + '/task/#{taskBean.id}', function(marker) {
      $.get(restAccess + '/process-definition/' + marker.processDefinitionId + '/xml', function(data) {
        // show it in bpmn.io
        viewer.importXML(data.bpmn20Xml, function(err) {
          if (err) {
            console.log('error rendering', err);
          } else {
            var canvas = viewer.get('canvas');
            // zoom to fit full viewport
            canvas.zoom('fit-viewport');
            container.removeClass('with-error')
                 .addClass('with-diagram');
            // add marker
            canvas.addMarker(marker.taskDefinitionKey, 'highlight');                  
          }
        });
      });
    });
});

</code></pre>
You can see the full JSF page here:&nbsp;<a href="https://github.com/camunda/camunda-consulting/blob/master/snippets/jsf-simple-tasklist/src/main/webapp/app/taskDetail.xhtml" target="_blank">taskDetail.xhtml</a>. There you can also see the JavaScript libararies we loaded - all available via WebJars by the way.<br />
<br />
Note that it does not have to be JSF - a simple HTML page does the trick as well, as you can see in&nbsp;<a href="https://github.com/camunda/camunda-consulting/blob/master/snippets/jsf-simple-tasklist/src/main/webapp/app/taskDetail.html" target="_blank">taskDetail.html</a>. Or you can embedd all this in the tooling of your choice :-)<br />
<br />
Great stuff - thanks to the <a href="http://bpmn.io/about/" target="_blank">bpmn.io Team</a> for the good work!</div>

<p></div></p>

      </div>

      <footer>
  <div>
    <div class="tags">
      <span class="glyphicon glyphicon-tag"></span>
      <ul class="list-inline">
        
          <li><a href="http://camunda.github.io/blog.camunda.org/tags/release-note">Release Note</a> </li>
        
      </ul>
    </div>

    <div class="author" id="author-badge">
      
  Bernd Rücker


    </div>
  </div>

  <div>
    <div class="next-post">
      <a href="/blog.camunda.org/post/2015/08/first-version-of-dmnio-released/">« First Version of dmn.io Released</a>
    </div>

    <div class="previous-post">
      <a href="/blog.camunda.org/post/2015/08/start-and-complete-process-with-rest-api/">Start and Complete a process with the REST API »</a>
    </div>
  </div>
</footer>


      <div class="comments">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </article>
  </div>

</div>

<div class="sidebar">
  <div class="sidebar-content">
    <div class="col">
      <h5>Blog</h5>
      <ul>
        <li><a href="http://camunda.github.io/blog.camunda.org/">Home</a></li>
        <li><a href="http://camunda.github.io/blog.camunda.org/tags/">Tags</a></li>
        <li><a href="http://camunda.github.io/blog.camunda.org/index.xml">RSS</a></li>
      </ul>
    </div>

    <div class="col">
      <h5>Camunda</h5>
      <ul>
        <li><a href="http://camunda.org">camunda.org</a></li>
        <li><a href="http://github.com/camunda">Camunda on github</a></li>
        <li><a href="http://network.camunda.org">network.camunda.org</a></li>
        <li><a href="http://bpmn.io">bpmn.io</a></li>
        <li><a href="http://https://groups.google.com/forum/#!forum/camunda-bpm-users">Forum</a></li>
      </ul>
    </div>
  </div>
</div>


<footer>
  <div>
    <div class="boring-stuff">
      <ul class="list-inline">
        <li><a href="https://network.camunda.org/imprint">Imprint</a></li>
        <li><a href="https://network.camunda.org/privacy">Privacy Policy &amp; Cookies</a></li>
      </ul>
    </div>

    <nav class="networks text-center">
      <ul class="list-inline">
        <li>
          <a href="http://github.com/camunda">
            <span class="cam-blog-github"></span>
          </a>
        </li>
        <li>
          <a href="http://stackoverflow.com/questions/tagged/camunda">
            <span class="cam-blog-stackoverflow"></span>
          </a>
        </li>
        <li>
          <a href="http://twitter.com/camundabpm">
            <span class="cam-blog-twitter"></span>
          </a>
        </li>
        <li>
          <a href="https://vimeo.com/user22820658">
            <span class="cam-blog-vimeo"></span>
          </a>
        </li>
        <li>
          <a href="http://camunda.github.io/blog.camunda.org/index.xml">
            <span class="cam-blog-rss"></span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="back-to-top">
      <a href="#">Back to top <span class="glyphicon glyphicon-chevron-up"></span></a>
    </div>
  </div>
</footer>

<script type="text/javascript" src="http://camunda.github.io/blog.camunda.org/js/scripts.js"></script>
</body>
</html>

